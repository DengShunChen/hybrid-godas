#!/bin/bash
set -eu
#================================================================================
# Main configuration script for MOM6 Hybrid-GODAS run system
#================================================================================

export EXP_NAME="${EXP_NAME}"
export SCHED_ACCT="cpo_hyb_go"
export SCHED_QUEUE="batch"

# Timing
#------------------------------------------------------------
export CYCLE_START=2003010512
export CYCLE_END=2004010112
export CYCLE_LEN=120
export CYCLE_LEAPADJ=0

# Fixed directories
#------------------------------------------------------------
export ROOT_DIR="${ROOT_DIR}"
export EXP_DIR="${EXP_DIR}"
export WORK_DIR="${ROOT_DIR}/WRK/${EXP_NAME}"

# Data cycle / timeslots
#---------------------------------------------------------------------
export ENS_SIZE=10
export DA_MODE="hyb"    # ekf, var, hyb, none
export DA_TIMESLOTS=$(($CYCLE_LEN / 24 ))
export DA_WNDW_OFST=-48
export FCST_RST_OFST=12

# Observations
#------------------------------------------------------------
export OBS_ERR_ON_MISS=0
export OBS_USE_SST=1
export OBS_SST=${D}ROOT_DIR/DATA/obs/sst_acspo_avhrr/%Y/%Y%m/%Y%m%d.nc
export OBS_USE_PROF=1
export OBS_PROF_T=${D}ROOT_DIR/DATA/obs/profile_wod/%Y/%Y%m%d.T.nc
export OBS_PROF_S=${D}ROOT_DIR/DATA/obs/profile_wod/%Y/%Y%m%d.S.nc

# Surface forcing
#------------------------------------------------------------
export FORC_HR=12
export FORC_PERTURB=1
export FORC_MEAN_FILE=${D}ROOT_DIR/DATA/fluxes/dfs52/%Y/%Y%m%d/dfs52.%Y%m%d.'#var#'.nc
export FORC_ENS_FILE=${D}ROOT_DIR/DATA/fluxes/20CRv2c/%Y/%Y%m%d/'#mem2#'/20cr.%Y%m%d.'#var#'.nc

# MOM6 File I/O formats
#------------------------------------------------------------
export FCST_IO_PROC=36
export FCST_IO_MISS="0024"
export FCST_FILE_MINSIZE=39000000  # in bytes
export FCST_FILE_MINAGE=10 # in seconds


# 5 day cycle, analylsis time on last day
# # 1 day
# CYCLE_LEN=24
# DAWNDW_OFST=0
# FCST_RST_OFST=12

# # 5 day with centered window
# CYCLE=20000108Z12
# CYCLE_LEN=120
# DAWNDW_OFST=0
# FCST_RST_OFST=0

# # 5 day with 5 day IAU
# CYCLE=20000108Z12
# CYCLE_LEN=120
# DAWNDW_OFST=0
# FCST_RST_OFST="-60"

#DAWNDW_LEN=$CYCLE_LEN

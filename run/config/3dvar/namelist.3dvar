!================================================================================
! MOM6 GODAS-3DVar namelist
! For godas programs (3dvar, bgvar, vtloc)
!================================================================================



!------------------------------------------------------------
! Grid dimensions
!------------------------------------------------------------
&g3dv_grid
  grid_nx = 1440
  grid_ny = 1080
  grid_nz = 75
/


!------------------------------------------------------------
! Observations
!------------------------------------------------------------
&g3dv_obs
  ! single obs tests
  test_obs = .false.
  test_obs_max  = 20

  ioclass = "OBSIO_NC"
  obsfile = "INPUT/obs.nc"
  
  depth_max = -1
  use_t = T
  use_s = T

  qc_max = 10.0
  inc_max_t = 10.0
  inc_max_s = 1.0
  obs_block_dx = 25
  obs_block_dy = 25

  obs_id_t = 2210
  obs_id_s = 2220
/


!------------------------------------------------------------
! PCG Solver
!------------------------------------------------------------
&g3dv_solver
  maxitr = 30
  conv_ratio = 1e2
/


!------------------------------------------------------------
! Latitude dependant horizontal localization distances
!------------------------------------------------------------
&g3dv_hzloc
  ! horizontal localization distance
  hz_loc = 300e3, 50e3
  hz_loc_scale=2.5
/


!------------------------------------------------------------
! Background error covariance
!------------------------------------------------------------
&g3dv_bgcov
  ! other covariance parameters, hzloc is handled above
  ! time localization
  time_loc = 120.0

  vt_loc_diff_scale=1.0

  ! gradient tensors
  tnsr_surf  = 0.05
  tnsr_coast_dist = 75e3
!  tnsr_coast_min  = 0.3


!  bgvar_t = 0.8
  bgvar_s = 0.25
/


!------------------------------------------------------------
! Vertical localization creation program
!------------------------------------------------------------
&vtloc_nml
  rho_delta = 0.125
  vtloc_min= 1.0
  vtloc_max = 250.0
  gauss_iter = 3
  mld_only=T
/


!------------------------------------------------------------
! Background error variance creation program
!------------------------------------------------------------
&bgvar_nml
  t_varmin_do = 0.098
  t_varmin_surf_const = 0.5
  t_varmax = 1.8
  t_dz = 20.0
  gauss_iter = 3
/
